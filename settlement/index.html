<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>结算接口 | 灵时云</title>
    <meta name="generator" content="VuePress 1.9.9">
    <link rel="icon" href="/linsyun-docsfavicon.ico">
    <meta name="description" content="开发使用说明">
    
    <link rel="preload" href="/linsyun-docs/assets/css/0.styles.4dad094a.css" as="style"><link rel="preload" href="/linsyun-docs/assets/js/app.4ce34403.js" as="script"><link rel="preload" href="/linsyun-docs/assets/js/2.7f9018fb.js" as="script"><link rel="preload" href="/linsyun-docs/assets/js/12.71026cef.js" as="script"><link rel="prefetch" href="/linsyun-docs/assets/js/10.cc58adac.js"><link rel="prefetch" href="/linsyun-docs/assets/js/11.9f974fe3.js"><link rel="prefetch" href="/linsyun-docs/assets/js/13.3abca08a.js"><link rel="prefetch" href="/linsyun-docs/assets/js/14.e990c2ad.js"><link rel="prefetch" href="/linsyun-docs/assets/js/3.e5a291f6.js"><link rel="prefetch" href="/linsyun-docs/assets/js/4.56343cf6.js"><link rel="prefetch" href="/linsyun-docs/assets/js/5.854552eb.js"><link rel="prefetch" href="/linsyun-docs/assets/js/6.3f568e7b.js"><link rel="prefetch" href="/linsyun-docs/assets/js/7.38dd6188.js"><link rel="prefetch" href="/linsyun-docs/assets/js/8.69352151.js"><link rel="prefetch" href="/linsyun-docs/assets/js/9.0e207130.js">
    <link rel="stylesheet" href="/linsyun-docs/assets/css/0.styles.4dad094a.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/linsyun-docs/" class="home-link router-link-active"><img src="/linsyun-docslogo.png" alt="灵时云" class="logo"> <span class="site-name can-hide">灵时云</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/linsyun-docs/encryption/" class="nav-link">
  签名说明
</a></div><div class="nav-item"><a href="/linsyun-docs/merchant/" class="nav-link">
  商户接口
</a></div><div class="nav-item"><a href="/linsyun-docs/authSign/" class="nav-link">
  创客接口
</a></div><div class="nav-item"><a href="/linsyun-docs/settlement/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  结算接口
</a></div><div class="nav-item"><a href="/linsyun-docs/dutiable/" class="nav-link">
  完税接口
</a></div><div class="nav-item"><a href="/linsyun-docs/version/" class="nav-link">
  历史版本
</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/linsyun-docs/encryption/" class="nav-link">
  签名说明
</a></div><div class="nav-item"><a href="/linsyun-docs/merchant/" class="nav-link">
  商户接口
</a></div><div class="nav-item"><a href="/linsyun-docs/authSign/" class="nav-link">
  创客接口
</a></div><div class="nav-item"><a href="/linsyun-docs/settlement/" aria-current="page" class="nav-link router-link-exact-active router-link-active">
  结算接口
</a></div><div class="nav-item"><a href="/linsyun-docs/dutiable/" class="nav-link">
  完税接口
</a></div><div class="nav-item"><a href="/linsyun-docs/version/" class="nav-link">
  历史版本
</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>结算接口</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/linsyun-docs/settlement/#_1-结算发放" class="sidebar-link">1. 结算发放</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/linsyun-docs/settlement/#_1-1-上传结算单接口" class="sidebar-link">1.1 上传结算单接口</a></li><li class="sidebar-sub-header"><a href="/linsyun-docs/settlement/#_1-2-查询结算单接口" class="sidebar-link">1.2 查询结算单接口</a></li><li class="sidebar-sub-header"><a href="/linsyun-docs/settlement/#_1-3-结算单回调" class="sidebar-link">1.3 结算单回调</a></li></ul></li><li><a href="/linsyun-docs/settlement/#_2-状态码说明" class="sidebar-link">2. 状态码说明</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="结算接口"><a href="#结算接口" class="header-anchor">#</a> 结算接口</h1> <h2 id="_1-结算发放"><a href="#_1-结算发放" class="header-anchor">#</a> 1. 结算发放</h2> <p>为实现结算的顺利开展，需在结算前提供以必要的信息和完成必要流程：</p> <ul><li>通过上传结算单接口，将结算信息上传；<code>此步骤之前，请登录灵时云系统-任务列表，添加任务，联系运营人员审核，任务编号审核通过后生效</code></li> <li>上传成功后，结算单自动提交审核，审核通过后，登录系统，点击确认发放&amp;批量确认发放按钮，进入发放流程；</li> <li>通过结算单查询接口，可查询每笔订单的打款状态；</li> <li>若设置回调接口，订单打款完成后，订单状态将自动推送到回调地址。<code>回调地址的设置：登录系统，右侧顶部折叠菜单，在账号设置中进行配置</code></li></ul> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><h3 id="_1-1-上传结算单接口"><a href="#_1-1-上传结算单接口" class="header-anchor">#</a> 1.1 上传结算单接口</h3> <p><strong>请求地址:</strong></p> <div class="language-url extra-class"><pre class="language-url"><code><span class="token scheme">https<span class="token scheme-delimiter">:</span></span><span class="token authority"><span class="token authority-delimiter">//</span></span>{BASE_URL}/api/WorkPlan/V2/UploadWorkPlan
</code></pre></div><p><strong>请求方式: POST</strong></p> <p><strong>BASE_URL:</strong></p> <table><thead><tr><th>环境</th> <th>地址</th></tr></thead> <tbody><tr><td>测试环境</td> <td>pre-lsy-outsource-openapi-interface-api.suuyuu.cn</td></tr> <tr><td>正式环境</td> <td>o.linsyun.com</td></tr></tbody></table> <p><strong>请求参数</strong> <code>请求参数以JSON方式提交</code></p> <table><thead><tr><th>参数名</th> <th>参数说明</th> <th>长度和属性</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>memberCode</td> <td>商户号</td> <td>String(50)</td> <td>√</td> <td>商户号，<strong>参与签名</strong>；例如：<code>SH123456</code></td></tr> <tr><td>updateMarkNo</td> <td>上传标识编号</td> <td>String(50)</td> <td>√</td> <td>上传表示编号，需要全局唯一，<strong>参与签名</strong>；例如：<code>A001</code></td></tr> <tr><td>timestamp</td> <td>时间戳</td> <td>String(20)</td> <td>√</td> <td>时间戳，格式为：<code>yyyy-MM-dd HH:mm:ss</code>，与当前时间误差不能超过10分钟，<strong>参与签名</strong>；例如：<code>2000-01-01 10:10:10</code></td></tr> <tr><td>sign</td> <td>签名</td> <td>String(50)</td> <td>√</td> <td>签名规则，见文档中说明；例如：<code>D1BD444BFC916C414248CB9BDC5300561208AD03</code></td></tr> <tr><td>workDetails</td> <td>结算信息</td> <td>List&lt;RequestModel&gt;</td> <td>√</td> <td>待上传结算明细数据，不参与签名；示例见文档中的请求示例</td></tr> <tr><td>taskNo</td> <td>任务编号</td> <td>String(50)</td> <td>√</td> <td>上传任务编号，不参与签名；（来源灵时云任务管理中任务编号）例如：<code>RW9079788202108107143</code></td></tr> <tr><td>CallBackUrl</td> <td>回调地址</td> <td>String(50)</td> <td></td> <td>结算单回调地址,可在账号设置中配置统一回调地址，优先回调该地址</td></tr></tbody></table> <p><strong>RequestModel</strong></p> <table><thead><tr><th>参数名</th> <th>参数说明</th> <th>长度和属性</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>shopNo</td> <td>商户流水号</td> <td>String(50)</td> <td>√</td> <td>商户自己生成，具有唯一性</td></tr> <tr><td>userName</td> <td>姓名</td> <td>String(50)</td> <td>√</td> <td></td></tr> <tr><td>idCard</td> <td>身份证号</td> <td>String(50)</td> <td>√</td> <td></td></tr> <tr><td>mobile</td> <td>手机号</td> <td>String(50)</td> <td>√</td> <td></td></tr> <tr><td>grantType</td> <td>下发类型</td> <td>String(10)</td> <td>√</td> <td><code>支付宝</code><br><code>银行</code></td></tr> <tr><td>accountName</td> <td>收款账户名</td> <td>String(200)</td> <td>√</td> <td></td></tr> <tr><td>accountNumber</td> <td>收款账户号</td> <td>String(200)</td> <td>√</td> <td>账号（银行卡/支付宝）</td></tr> <tr><td>afterTaxAmount</td> <td>税后金额（元）</td> <td>Deciaml(18,2)</td> <td>√</td> <td>实际打款的税后金额，单位：元，保留两位小数</td></tr> <tr><td>Remark</td> <td>备注</td> <td>String(200)</td> <td></td> <td>备注，商户对订单的补充说明，仅在系统内展示</td></tr></tbody></table> <p><strong>响应参数</strong></p> <table><thead><tr><th>参数名</th> <th>参数说明</th> <th>长度和属性</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>code</td> <td>状态码</td> <td>String</td> <td>√</td> <td>正常：0，详情请查看【<a href="#_2-%E7%8A%B6%E6%80%81%E7%A0%81%E8%AF%B4%E6%98%8E">状态码说明</a>】</td></tr> <tr><td>message</td> <td>返回信息描述</td> <td>String</td> <td>√</td> <td></td></tr> <tr><td>messageType</td> <td>返回信息类型</td> <td>Integer</td> <td>√</td> <td></td></tr> <tr><td>data</td> <td>返回数据</td> <td>ResponseModel</td> <td></td> <td>校验不通过信息</td></tr></tbody></table> <p><strong>ResponseModel</strong></p> <table><thead><tr><th>参数名</th> <th>参数说明</th> <th>长度和属性</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>updateMarkNo</td> <td>上传标识编号</td> <td>String(50)</td> <td>√</td> <td></td></tr> <tr><td>planNo</td> <td>结算单编号</td> <td>String(50)</td> <td>√</td> <td>因下发类型不同，<strong>一批次上传结算单接口最多会返回三个结算单编号</strong><br>已固定格式反馈，顺序是支付宝，银行，微信（英文逗号隔开）</td></tr> <tr><td>failDetail</td> <td>失败列表</td> <td>List&lt;FailDetailModel&gt;</td> <td></td> <td>存在重复商户流水号的反馈</td></tr></tbody></table> <p><strong>FailDetailModel</strong></p> <table><thead><tr><th>参数名</th> <th>参数说明</th> <th>长度和属性</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>shopNo</td> <td>商户流水号</td> <td>string</td> <td>√</td> <td>商户流水号</td></tr> <tr><td>currentGrantState</td> <td>当前打款状态</td> <td>Integer</td> <td>√</td> <td>已存在的订单打款状态(1:待打款,2:打款中,3:打款成功)</td></tr> <tr><td>failCause</td> <td>失败原因</td> <td>String</td> <td>√</td> <td></td></tr></tbody></table> <p><strong>参数示例</strong></p> <div class="language-JSON extra-class"><pre class="language-json"><code># 请求参数示例
<span class="token punctuation">{</span>
    <span class="token property">&quot;memberCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SH123456&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;updateMarkNo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A001&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2000-01-01 10:10:10&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sign&quot;</span><span class="token operator">:</span> <span class="token string">&quot;D1BD444BFC916C414248CB9BDC5300561208AD03&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;TaskNo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;RWxxxxxxxxxxxxx&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;workDetails&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;shopNo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ABC001&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;userName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;idCard&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11010120000101001X&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;mobile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13812345678&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;grantType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;支付宝&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;accountName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;accountNumber&quot;</span><span class="token operator">:</span> <span class="token string">&quot;138xxxxxxxxx&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;afterTaxAmount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;150&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;remark&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;shopNo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;ABC002&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;userName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;idCard&quot;</span><span class="token operator">:</span> <span class="token string">&quot;11010120000101002X&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;mobile&quot;</span><span class="token operator">:</span> <span class="token string">&quot;13812345678&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;grantType&quot;</span><span class="token operator">:</span> <span class="token string">&quot;银行&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;accountName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;李四&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;accountNumber&quot;</span><span class="token operator">:</span> <span class="token string">&quot;88888xxxxxxxxx&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;afterTaxAmount&quot;</span><span class="token operator">:</span> <span class="token string">&quot;150&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;remark&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>
   <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-2-查询结算单接口"><a href="#_1-2-查询结算单接口" class="header-anchor">#</a> 1.2 查询结算单接口</h3> <p><strong>请求地址:</strong></p> <div class="language-url extra-class"><pre class="language-url"><code><span class="token scheme">https<span class="token scheme-delimiter">:</span></span><span class="token authority"><span class="token authority-delimiter">//</span></span>{BASE_URL}/api/WorkPlan/QueryWorkPlan
</code></pre></div><p><strong>请求方式: POST</strong></p> <p><strong>BASE_URL:</strong></p> <table><thead><tr><th>环境</th> <th>地址</th></tr></thead> <tbody><tr><td>测试环境</td> <td>pre-lsy-outsource-openapi-interface-api.suuyuu.cn</td></tr> <tr><td>正式环境</td> <td>o.linsyun.com</td></tr></tbody></table> <p><strong>请求参数</strong> <code>请求参数以JSON方式提交</code></p> <table><thead><tr><th>参数名</th> <th>参数说明</th> <th>长度和属性</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>memberCode</td> <td>商户号</td> <td>String(50)</td> <td>√</td> <td>商户号，参与签名；例如：<code>SH123456</code></td></tr> <tr><td>updateMarkNo</td> <td>上传标识编号</td> <td>String(50)</td> <td>√</td> <td>上传表示编号，需要全局唯一，参与签名；例如：<code>A001</code></td></tr> <tr><td>timestamp</td> <td>时间戳</td> <td>String(20)</td> <td>√</td> <td>时间戳，格式为：<code>yyyy-MM-dd HH:mm:ss</code>，与当前时间误差不能超过10分钟，参与签名；例如：<code>2000-01-01 10:10:10</code></td></tr> <tr><td>sign</td> <td>签名</td> <td>String(50)</td> <td>√</td> <td>签名规则，见文档中说明；例如：<code>D1BD444BFC916C414248CB9BDC5300561208AD03</code></td></tr></tbody></table> <p><strong>响应参数</strong></p> <table><thead><tr><th>参数名</th> <th>参数说明</th> <th>长度和属性</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>code</td> <td>状态码</td> <td>String</td> <td>√</td> <td>正常：0，详情请查看【<a href="#_2-%E7%8A%B6%E6%80%81%E7%A0%81%E8%AF%B4%E6%98%8E">状态码说明</a>】</td></tr> <tr><td>message</td> <td>返回信息描述</td> <td>String</td> <td>√</td> <td></td></tr> <tr><td>messageType</td> <td>返回信息类型</td> <td>Integer</td> <td>√</td> <td></td></tr> <tr><td>data</td> <td>返回数据</td> <td>ResponseModel</td> <td></td> <td>数据信息</td></tr></tbody></table> <p><strong>ResponseModel</strong></p> <table><thead><tr><th>参数名</th> <th>参数说明</th> <th>长度和属性</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>uploadMarkNo</td> <td>上传标识编号</td> <td>String</td> <td>√</td> <td></td></tr> <tr><td>planNo</td> <td>结算单编号</td> <td>String</td> <td>√</td> <td>已固定格式反馈，顺序是支付宝，银行，微信（英文逗号隔开）</td></tr> <tr><td>planName</td> <td>结算单名称</td> <td>String</td> <td>√</td> <td></td></tr> <tr><td>planAuditState</td> <td>结算单审批状态</td> <td>Integer</td> <td>√</td> <td></td></tr> <tr><td>completeFbState</td> <td>完整处理状态</td> <td>Integer</td> <td>√</td> <td>1:未处理、2：部分处理、3：完全处理</td></tr> <tr><td>planDetail</td> <td>结算明细列表</td> <td>List&lt;PlanDetailModel&gt;</td> <td>√</td> <td>结算单明细数据</td></tr></tbody></table> <p><strong>PlanDetailModel</strong></p> <table><thead><tr><th>参数名</th> <th>参数说明</th> <th>长度和属性</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>shopNo</td> <td>商户流水号</td> <td>String</td> <td>√</td> <td>商户流水号</td></tr> <tr><td>userName</td> <td>姓名</td> <td>String</td> <td>√</td> <td></td></tr> <tr><td>idCard</td> <td>身份证号</td> <td>String</td> <td>√</td> <td></td></tr> <tr><td>afterTaxAmount</td> <td>税后金额（元）</td> <td>Decimal</td> <td>√</td> <td>实际打款的税后金额</td></tr> <tr><td>payState</td> <td>打款状态</td> <td>Integer</td> <td>√</td> <td>1：待打款、2：打款中、3：打款成功、4：打款失败</td></tr> <tr><td>failReason</td> <td>打款失败原因</td> <td>String</td> <td></td> <td></td></tr> <tr><td>externalNo</td> <td>外部订单号</td> <td>String</td> <td></td> <td></td></tr></tbody></table> <p><strong>参数示例</strong></p> <div class="language-JSON extra-class"><pre class="language-json"><code># 请求参数示例
<span class="token punctuation">{</span>
    <span class="token property">&quot;memberCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SH123456&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;updateMarkNo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A001&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2000-01-01 10:10:10&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sign&quot;</span><span class="token operator">:</span> <span class="token string">&quot;D1BD444BFC916C414248CB9BDC5300561208AD03&quot;</span><span class="token punctuation">,</span>
<span class="token punctuation">}</span>
</code></pre></div><h3 id="_1-3-结算单回调"><a href="#_1-3-结算单回调" class="header-anchor">#</a> 1.3 结算单回调</h3> <div class="spinner" style="background:rgb(66, 185, 131);" data-v-1bbcb91a></div><ul><li>接口以灵时云主动推送数据为主</li> <li>推送失败情况：每3分钟进行推送，推送3次后，进行每小时推送</li> <li>推送回复状态码为<code>0</code>则表示推送成功，不再继续推送</li></ul> <p><strong>推送场景:</strong></p> <table><thead><tr><th>场景</th> <th>回调推送机制</th> <th>备注</th></tr></thead> <tbody><tr><td>确认发放完成</td> <td>单次处理完毕回调</td> <td>回调打款数据，打款状态及失败原因</td></tr> <tr><td>批次整单拒绝发放</td> <td>整单批次实时回调</td> <td>回调打款状态为打款失败，失败原因为取消打款</td></tr> <tr><td>批次整单审核不通过</td> <td>整单批次实时回调</td> <td>回调打款状态为打款失败，失败原因为审核未通过</td></tr> <tr><td>用工明细部分取消打款</td> <td>单次处理完毕回调</td> <td>取消打款明细打款状态为打款失败，失败原因为取消打款</td></tr></tbody></table> <p><strong>请求方式: POST</strong></p> <p><strong>推送参数</strong> <code>推送参数以JSON方式推送</code></p> <table><thead><tr><th>参数名</th> <th>参数说明</th> <th>长度和属性</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>memberCode</td> <td>商户号</td> <td>String(50)</td> <td>√</td> <td>商户号，<strong>参与签名</strong>；例如：<code>SH123456</code></td></tr> <tr><td>updateMarkNo</td> <td>上传标识编号</td> <td>String(50)</td> <td>√</td> <td>上传表示编号，需要全局唯一，<strong>参与签名</strong>；例如：<code>A001</code></td></tr> <tr><td>timestamp</td> <td>时间戳</td> <td>String(20)</td> <td>√</td> <td>时间戳，格式为：<code>yyyy-MM-dd HH:mm:ss</code>，与当前时间误差不能超过10分钟，<strong>参与签名</strong>；例如：<code>2000-01-01 10:10:10</code></td></tr> <tr><td>sign</td> <td>签名</td> <td>String(50)</td> <td>√</td> <td>签名规则，见文档中说明；例如：<code>D1BD444BFC916C414248CB9BDC5300561208AD03</code></td></tr> <tr><td>PlanNo</td> <td>结算单编号</td> <td>String(50)</td> <td>√</td> <td></td></tr> <tr><td>PlanName</td> <td>结算单名称</td> <td>String(200)</td> <td>√</td> <td></td></tr> <tr><td>PlanAuditState</td> <td>审核状态</td> <td>Ineger</td> <td>√</td> <td></td></tr> <tr><td>PlanDetail</td> <td>结算明细</td> <td>List&lt;PlanDetailModel&gt;</td> <td></td> <td></td></tr></tbody></table> <p><strong>PlanDetailModel</strong></p> <table><thead><tr><th>参数名</th> <th>参数说明</th> <th>长度和属性</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>ShopNo</td> <td>商户流水号</td> <td>String</td> <td>√</td> <td></td></tr> <tr><td>UserName</td> <td>姓名</td> <td>String(50)</td> <td>√</td> <td></td></tr> <tr><td>IdCard</td> <td>身份证号</td> <td>String(50)</td> <td>√</td> <td></td></tr> <tr><td>Mobile</td> <td>手机号</td> <td>String(20)</td> <td>√</td> <td></td></tr> <tr><td>AfterTaxAmount</td> <td>税后金额（元）</td> <td>Deciaml(18,2)</td> <td>√</td> <td>实际打款的税后金额，单位：元，保留两位小数</td></tr> <tr><td>ServiceFee</td> <td>服务费（元）</td> <td>Deciaml(18,2)</td> <td>√</td> <td></td></tr> <tr><td>PayState</td> <td>打款状态</td> <td>Integer</td> <td>√</td> <td>1：待打款、2：打款中、3：打款成功、4：打款失败</td></tr> <tr><td>PayFinishTime</td> <td>打款完成时间</td> <td>String</td> <td></td> <td>打款完成时间，时间格式：<code>yyyy-MM-dd HH:mm:ss</code></td></tr> <tr><td>FailReason</td> <td>打款失败原因</td> <td>String</td> <td></td> <td></td></tr> <tr><td>ExternalNo</td> <td>外部订单号</td> <td>String</td> <td></td> <td></td></tr> <tr><td>receiptInfo</td> <td>电子回单链接</td> <td>String</td> <td>ㅤ</td> <td>电子回单链接,打款成功订单T+2才会获取</td></tr></tbody></table> <p><strong>回复参数</strong></p> <table><thead><tr><th>参数名</th> <th>参数说明</th> <th>长度和属性</th> <th>必填</th> <th>备注</th></tr></thead> <tbody><tr><td>planNo</td> <td>结算单编号</td> <td>String</td> <td>√</td> <td></td></tr> <tr><td>code</td> <td>状态码</td> <td>String</td> <td>√</td> <td></td></tr> <tr><td>message</td> <td>回复信息描述</td> <td>String</td> <td>√</td> <td></td></tr></tbody></table> <p><strong>参数示例</strong></p> <div class="language-JSON extra-class"><pre class="language-json"><code># 推送参数示例
<span class="token punctuation">{</span>
    <span class="token property">&quot;PlanNo&quot;</span><span class="token operator">:</span><span class="token string">&quot;TCAPIA0001&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;PlanName&quot;</span><span class="token operator">:</span><span class="token string">&quot;TCAPIA0001&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;PlanAuditState&quot;</span><span class="token operator">:</span><span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;MemberCode&quot;</span><span class="token operator">:</span> <span class="token string">&quot;SH123456&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;UpdateMarkNo&quot;</span><span class="token operator">:</span> <span class="token string">&quot;A001&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Timestamp&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2000-01-01 10:10:10&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;Sign&quot;</span><span class="token operator">:</span> <span class="token string">&quot;D1BD444BFC916C414248CB9BDC5300561208AD03&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;PlanDetail&quot;</span><span class="token operator">:</span><span class="token punctuation">[</span>
        <span class="token punctuation">{</span>
            <span class="token property">&quot;ShopNo&quot;</span><span class="token operator">:</span><span class="token string">&quot;ABC001&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;UserName&quot;</span><span class="token operator">:</span><span class="token string">&quot;张三&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;IdCard&quot;</span><span class="token operator">:</span><span class="token string">&quot;11010120000101001X&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;Mobile&quot;</span><span class="token operator">:</span><span class="token string">&quot;13812345678&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;AfterTaxAmount&quot;</span><span class="token operator">:</span><span class="token number">99.99</span><span class="token punctuation">,</span>
            <span class="token property">&quot;ServiceFee&quot;</span><span class="token operator">:</span><span class="token number">9.9</span><span class="token punctuation">,</span>
            <span class="token property">&quot;PayState&quot;</span><span class="token operator">:</span><span class="token number">4</span><span class="token punctuation">,</span>
            <span class="token property">&quot;FailReason&quot;</span><span class="token operator">:</span><span class="token string">&quot;打款失败,原因:99000-支付失败，原因为：结算失败&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;PayFinishTime&quot;</span><span class="token operator">:</span><span class="token string">&quot;2000-01-01 10:10:10&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;ExternalNo&quot;</span><span class="token operator">:</span><span class="token string">&quot;R123456789&quot;</span><span class="token punctuation">,</span>
            <span class="token property">&quot;receiptInfo&quot;</span><span class="token operator">:</span><span class="token string">&quot;&quot;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre></div><h2 id="_2-状态码说明"><a href="#_2-状态码说明" class="header-anchor">#</a> 2. 状态码说明</h2> <table><thead><tr><th>CODE值</th> <th>说明</th></tr></thead> <tbody><tr><td>0</td> <td>成功</td></tr> <tr><td>999</td> <td>失败</td></tr> <tr><td>1000</td> <td>缺少必要参数</td></tr> <tr><td>1001</td> <td>时间戳格式错误</td></tr> <tr><td>1002</td> <td>时间戳已超过有效期</td></tr> <tr><td>1003</td> <td>上传中请勿重复提交</td></tr> <tr><td>1004</td> <td>商户不存在</td></tr> <tr><td>1005</td> <td>商户配置异常</td></tr> <tr><td>1006</td> <td>签名错误</td></tr> <tr><td>1007</td> <td>上传明细数据超过2000条</td></tr> <tr><td>1008</td> <td>上传标识编号已存在</td></tr> <tr><td>1009</td> <td>未上传数据</td></tr> <tr><td>1017</td> <td>存在未校验通过的数据</td></tr> <tr><td>1018</td> <td>明细数据存在空商户流水号的数据</td></tr> <tr><td>1019</td> <td>全订单明细未上传成功</td></tr> <tr><td>1020</td> <td>未开通支付宝通道，下发类型错误</td></tr> <tr><td>1021</td> <td>未开通银行通道，下发类型错误</td></tr> <tr><td>1022</td> <td>任务不存在</td></tr> <tr><td>1023</td> <td>任务未审核通过</td></tr> <tr><td>5000</td> <td>系统异常</td></tr> <tr><td>5000</td> <td>系统异常</td></tr></tbody></table></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">最后更新时间:</span> <span class="time">5/9/2024, 3:45:08 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/linsyun-docs/authSign/" class="prev">
        创客接口
      </a></span> <span class="next"><a href="/linsyun-docs/version/">
        历史版本
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"><!----></div></div>
    <script src="/linsyun-docs/assets/js/app.4ce34403.js" defer></script><script src="/linsyun-docs/assets/js/2.7f9018fb.js" defer></script><script src="/linsyun-docs/assets/js/12.71026cef.js" defer></script>
  </body>
</html>
